@model ToDoApp.ViewModels.IndexViewModel
@using ToDoApp.Infrastructure

@{
    ViewBag.Title = "Task List";
}

<style>
    .task-list { list-style-type: square; }
    .task-list li { margin: 5px 0; }
</style>

<h3>Task List</h3>
@Html.CreateTaskList(Model.Tasks)

<h3>Create New Task</h3>
<a href="/Tasks/Create">Add New Task</a>

<h3>Filter Tasks</h3>
<form method="get" action="/Tasks/Index">
    <label>Status:</label>
    <select name="status">
        <option value="all" selected="@(Model.Status == "all" ? "selected" : null)">All</option>
        <option value="completed" selected="@(Model.Status == "completed" ? "selected" : null)">Completed</option>
        <option value="notcompleted" selected="@(Model.Status == "notcompleted" ? "selected" : null)">Not Completed</option>
    </select>
    <label>Time:</label>
    <select name="timeFilter">
        @foreach (var filter in Model.TimeFilters)
        {
            <option value="@filter.Id" selected="@(Model.TimeFilter == filter.Id ? "selected" : null)">@filter.Name</option>
        }
    </select>
    <button type="submit">Apply</button>
</form>

<h3>Add Task (Legacy)</h3>
<form method="post" action="/Tasks/Add">
    <label>Task Name:</label><br />
    <input name="task.Name" placeholder="Enter task name" /><br />
    <label>Completed:</label><br />
    <input type="checkbox" name="task.IsCompleted" value="true" /><br />
    <button type="submit">Add</button>
</form>

<h3>Get Tasks (JSON)</h3>
<a href="/Tasks/GetTasks">View tasks in JSON</a>

<h3>Redirect Demo</h3>
<a href="/Tasks/RedirectToInfo">Go to Info</a>

<h3>Find Task</h3>
<form method="get" action="/Tasks/FindTask">
    <input name="name" placeholder="Enter task name" /><br />
    <button type="submit">Find</button>
</form>

<h3>Download Tasks</h3>
<form method="get" action="/Tasks/DownloadTasks">
    <select name="status">
        <option value="all" selected="@(Model.Status == "all" ? "selected" : null)">All</option>
        <option value="completed" selected="@(Model.Status == "completed" ? "selected" : null)">Completed</option>
        <option value="notcompleted" selected="@(Model.Status == "notcompleted" ? "selected" : null)">Not Completed</option>
    </select>
    <select name="timeFilter">
        @foreach (var filter in Model.TimeFilters)
        {
            <option value="@filter.Id" selected="@(Model.TimeFilter == filter.Id ? "selected" : null)">@filter.Name</option>
        }
    </select>
    <button type="submit">Download</button>
</form>

@section Footer {
    Copyright Â© ToDoApp, @DateTime.Now.Year. All rights reserved
}